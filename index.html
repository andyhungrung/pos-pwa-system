<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>POSéŠ·å”®ç³»çµ±</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,sans-serif;background:#f3f4f6}
.container{height:100vh;display:flex;flex-direction:column}
.header{background:white;padding:16px;border-bottom:1px solid #e5e7eb;box-shadow:0 1px 3px rgba(0,0,0,0.1)}
.nav{display:flex;justify-content:space-between;align-items:center}
.title{font-size:24px;font-weight:bold;color:#1f2937}
.nav-buttons{display:flex;gap:8px}
.nav-btn{padding:8px 16px;border-radius:6px;border:none;cursor:pointer;font-size:14px;font-weight:500}
.nav-btn.active{background:#2563eb;color:white}
.nav-btn:not(.active){background:#e5e7eb;color:#374151}
.main{flex:1;overflow:hidden}
.page{display:none;height:100%}
.page.active{display:flex;flex-direction:column}
.page-content{flex:1;padding:16px;overflow-y:auto}
.section-title{font-size:20px;font-weight:600;margin-bottom:16px}
.card{background:white;padding:16px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1);margin-bottom:16px}
.input{padding:12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;width:100%}
.button{padding:12px 16px;background:#2563eb;color:white;border:none;border-radius:6px;font-weight:500;cursor:pointer}
.button:disabled{opacity:0.5;cursor:not-allowed}
.button-green{background:#16a34a}
.button-red{background:#dc2626}
.button-gray{background:#6b7280}
.sales-layout{flex:1;display:flex;flex-direction:column;overflow:hidden}
@media (min-width:769px){.sales-layout{flex-direction:row}}
.products-area{flex:2;padding:16px;overflow-y:auto;display:flex;flex-direction:column}
.cart-area{flex:1;background:white;border-top:2px solid #e5e7eb;padding:16px;display:flex;flex-direction:column}
@media (min-width:769px){.cart-area{width:320px;border-top:none;border-left:1px solid #e5e7eb}}
.product-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;overflow-y:auto}
@media (min-width:769px){.product-grid{grid-template-columns:repeat(3,1fr)}}
.product-card{background:white;padding:16px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1);cursor:pointer;text-align:center;min-height:80px;display:flex;flex-direction:column;justify-content:center;border:2px solid transparent}
.product-card:hover{border-color:#60a5fa}
.cart-items{flex:1;overflow-y:auto;margin-bottom:12px}
.cart-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f3f4f6}
.control-btn{width:28px;height:28px;background:#e5e7eb;border:none;border-radius:4px;cursor:pointer;font-size:14px}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:12px;text-align:left;border-bottom:1px solid #e5e7eb}
.table th{background:#f9fafb;font-weight:600}
.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000}
.modal-content{background:white;padding:24px;border-radius:8px;width:90%;max-width:400px}
.hidden{display:none!important}
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:24px}
@media (min-width:769px){.stats-grid{grid-template-columns:repeat(4,1fr)}}
.stat-card{background:white;padding:20px;border-radius:8px;text-align:center;box-shadow:0 1px 3px rgba(0,0,0,0.1)}
.stat-number{font-size:24px;font-weight:bold;color:#2563eb}
.stat-label{font-size:12px;color:#6b7280;margin-top:4px}
.charts-container{display:grid;grid-template-columns:1fr;gap:24px;margin-bottom:24px}
@media (min-width:1024px){.charts-container{grid-template-columns:1fr 1fr}}
.chart-card{background:white;padding:24px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
.chart-wrapper{height:300px;margin:20px 0}
.chart-legend{display:grid;gap:8px;max-height:200px;overflow-y:auto}
.legend-item{display:flex;justify-content:space-between;padding:8px 12px;background:#f9fafb;border-radius:6px;font-size:14px}
.legend-color{width:16px;height:16px;border-radius:4px;margin-right:8px;display:inline-block}
</style>
</head>
<body>
<script>
var POS={data:{products:[],cart:[],sales:[],editingId:null,charts:{quantity:null,revenue:null}},db:{init:function(){return new Promise(function(e,t){var r=indexedDB.open("POSSystemDB",2);r.onerror=function(){t(r.error)},r.onsuccess=function(){e(r.result)},r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("products")||t.createObjectStore("products",{keyPath:"id"}),t.objectStoreNames.contains("sales")||t.createObjectStore("sales",{keyPath:"id"})}})},operate:function(t,r,a){return this.init().then(function(e){var n,o=e.transaction([t],"getAll"===r?"readonly":"readwrite").objectStore(t);return"add"===r?n=o.add(a):"put"===r?n=o.put(a):"delete"===r?n=o.delete(a):"getAll"===r&&(n=o.getAll()),new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}).catch(function(e){return console.error("DBéŒ¯èª¤:",e),null})}},loadProducts:function(){var t=this;return this.db.operate("products","getAll").then(function(e){t.data.products=e||[],t.renderProducts()})},loadSales:function(){var t=this;return this.db.operate("sales","getAll").then(function(e){t.data.sales=e||[]})},renderProducts:function(){var gridEl=document.getElementById("productGrid");if(!gridEl)return;gridEl.innerHTML="";var self=this;if(this.data.products.length===0){gridEl.innerHTML="<div style='grid-column:1/-1;text-align:center;color:#6b7280;padding:40px;'>æš«ç„¡å•†å“ï¼Œè«‹å…ˆåˆ°å•†å“ç®¡ç†æ–°å¢å•†å“</div>";return}this.data.products.forEach(function(product){var card=document.createElement("div");card.className="product-card";card.innerHTML="<div style='font-weight:500;'>"+product.name+"</div><div style='color:#2563eb;font-weight:bold;'>$"+product.price+"</div>";card.onclick=function(){self.addToCart(product)};gridEl.appendChild(card)})},addToCart:function(e){for(var t=null,r=0;r<this.data.cart.length;r++)if(this.data.cart[r].id===e.id){t=this.data.cart[r];break}t?t.quantity+=1:this.data.cart.push({id:e.id,name:e.name,price:e.price,quantity:1}),this.updateCart()},updateCart:function(){var e=document.getElementById("cartItems"),t=document.getElementById("totalAmount"),r=document.getElementById("checkoutBtn");if(0===this.data.cart.length)e.innerHTML="<div style='text-align:center;color:#6b7280;padding:40px;'>è³¼ç‰©è»Šæ˜¯ç©ºçš„</div>",r.disabled=!0,t.textContent="ç¸½è¨ˆ: $0";else{var n=0;e.innerHTML="";this.data.cart.forEach(function(t){n+=t.price*t.quantity;var r=document.createElement("div");r.className="cart-item",r.innerHTML="<div style='flex:1;'><div style='font-weight:500;'>"+t.name+"</div><div style='font-size:12px;color:#6b7280;'>$"+t.price+" x "+t.quantity+"</div></div><div style='display:flex;gap:4px;align-items:center;'><button class='control-btn' onclick='POS.updateQuantity(\""+t.id+"\","+(t.quantity-1)+")'>-</button><span style='width:32px;text-align:center;'>"+t.quantity+"</span><button class='control-btn' onclick='POS.updateQuantity(\""+t.id+"\","+(t.quantity+1)+")'>+</button><button class='control-btn' onclick='POS.removeFromCart(\""+t.id+"\")' style='background:#fef2f2;color:#dc2626;'>Ã—</button></div>",e.appendChild(r)}),t.textContent="ç¸½è¨ˆ: $"+n,r.disabled=!1}},updateQuantity:function(e,t){if(t<=0)this.removeFromCart(e);else{for(var r=0;r<this.data.cart.length;r++)if(this.data.cart[r].id===e){this.data.cart[r].quantity=t;break}this.updateCart()}},removeFromCart:function(t){this.data.cart=this.data.cart.filter(function(e){return e.id!==t}),this.updateCart()},checkout:function(){if(0!==this.data.cart.length){for(var e=0,t=0;t<this.data.cart.length;t++)e+=this.data.cart[t].price*this.data.cart[t].quantity;var r={id:Date.now().toString(),items:JSON.parse(JSON.stringify(this.data.cart)),total:e,timestamp:(new Date).toISOString()},n=this;this.db.operate("sales","add",r).then(function(){n.data.sales.push(r),n.showAlert("çµå¸³æˆåŠŸï¼ç¸½é‡‘é¡ï¼š$"+e),n.data.cart=[],n.updateCart()})}},addManualProduct:function(){var e=document.getElementById("productName").value.trim(),t=parseFloat(document.getElementById("productPrice").value);e&&t?(this.addToCart({id:"temp_"+Date.now().toString(),name:e,price:t}),document.getElementById("productName").value="",document.getElementById("productPrice").value=""):this.showAlert("è«‹è¼¸å…¥å•†å“åç¨±å’Œåƒ¹æ ¼")},showPage:function(e){for(var t=document.querySelectorAll(".page"),r=0;r<t.length;r++)t[r].classList.remove("active");for(var n=document.querySelectorAll(".nav-btn"),r=0;r<n.length;r++)n[r].classList.remove("active");var o=document.getElementById(e+"Page");o&&o.classList.add("active"),window.event&&window.event.target&&window.event.target.classList.add("active"),"products"===e&&this.renderProductsTable(),"reports"===e&&(this.updateReports(),setTimeout(function(){POS.updateCharts()},100))},renderProductsTable:function(){var e=document.getElementById("productsTableBody");if(e.innerHTML="",0===this.data.products.length)e.innerHTML="<tr><td colspan='3' style='text-align:center;color:#6b7280;padding:40px;'>æš«ç„¡å•†å“</td></tr>";else{this.data.products.forEach(function(e){var t=document.createElement("tr");t.innerHTML="<td>"+e.name+"</td><td>$"+e.price+"</td><td><button class='button' onclick='POS.editProduct(\""+e.id+"\")' style='padding:6px 12px;font-size:12px;margin-right:8px;'>ç·¨è¼¯</button><button class='button button-red' onclick='POS.deleteProduct(\""+e.id+"\")' style='padding:6px 12px;font-size:12px;'>åˆªé™¤</button></td>",document.getElementById("productsTableBody").appendChild(t)})}},showProductModal:function(e){this.data.editingId=e?e.id:null,document.getElementById("modalTitle").textContent=e?"ç·¨è¼¯å•†å“":"æ–°å¢å•†å“",document.getElementById("modalProductName").value=e?e.name:"",document.getElementById("modalProductPrice").value=e?e.price:"",document.getElementById("productModal").classList.remove("hidden")},closeProductModal:function(){document.getElementById("productModal").classList.add("hidden"),this.data.editingId=null},saveProduct:function(){var e=document.getElementById("modalProductName").value.trim(),t=parseFloat(document.getElementById("modalProductPrice").value);if(e&&t){var r={id:this.data.editingId||Date.now().toString(),name:e,price:t},n=this;this.db.operate("products","put",r).then(function(){if(n.data.editingId){for(var e=0;e<n.data.products.length;e++)if(n.data.products[e].id===n.data.editingId){n.data.products[e]=r;break}}else n.data.products.push(r);n.renderProducts(),n.renderProductsTable(),n.closeProductModal(),n.showAlert(n.data.editingId?"å•†å“æ›´æ–°æˆåŠŸ":"å•†å“æ–°å¢æˆåŠŸ")})}else this.showAlert("è«‹è¼¸å…¥å•†å“åç¨±å’Œåƒ¹æ ¼")},editProduct:function(e){for(var t=0;t<this.data.products.length;t++)if(this.data.products[t].id===e){this.showProductModal(this.data.products[t]);break}},deleteProduct:function(t){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤å•†å“å—ï¼Ÿ")){var r=this;this.db.operate("products","delete",t).then(function(){r.data.products=r.data.products.filter(function(e){return e.id!==t}),r.renderProducts(),r.renderProductsTable(),r.showAlert("å•†å“åˆªé™¤æˆåŠŸ")})}},clearAllSales:function(){if(confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰éŠ·å”®è¨˜éŒ„å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼")){for(var e=this,t=[],r=0;r<this.data.sales.length;r++)t.push(this.db.operate("sales","delete",this.data.sales[r].id));Promise.all(t).then(function(){e.data.sales=[],e.updateReports(),e.updateCharts(),e.showAlert("å·²æ¸…é™¤æ‰€æœ‰éŠ·å”®è¨˜éŒ„")})}},clearSingleSale:function(t){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤ç­†éŠ·å”®è¨˜éŒ„å—ï¼Ÿ")){var r=this;this.db.operate("sales","delete",t).then(function(){r.data.sales=r.data.sales.filter(function(e){return e.id!==t}),r.updateReports(),r.updateCharts(),r.showAlert("éŠ·å”®è¨˜éŒ„å·²åˆªé™¤")})}},updateReports:function(){document.getElementById("totalProducts").textContent=this.data.products.length,document.getElementById("totalSales").textContent=this.data.sales.length;for(var e=0,t=0;t<this.data.sales.length;t++)e+=this.data.sales[t].total;document.getElementById("totalRevenue").textContent="$"+e.toLocaleString(),document.getElementById("avgOrder").textContent=0<this.data.sales.length?"$"+Math.round(e/this.data.sales.length):"$0";var r=document.getElementById("salesHistory");if(0===this.data.sales.length)r.innerHTML="<p style='text-align:center;color:#6b7280;padding:40px;'>æš«ç„¡éŠ·å”®è¨˜éŒ„</p>";else{r.innerHTML="";this.data.sales.slice().reverse().forEach(function(e){for(var t="",r=0;r<e.items.length;r++)0<r&&(t+=", "),t+=e.items[r].name+"x"+e.items[r].quantity;var n=document.createElement("div");n.style.cssText="padding:12px;border-bottom:1px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center;",n.innerHTML="<div style='flex:1;'><div style='display:flex;justify-content:space-between;margin-bottom:4px;'><span style='font-size:12px;color:#6b7280;'>"+new Date(e.timestamp).toLocaleString("zh-TW")+"</span><span style='font-weight:600;'>$"+e.total+"</span></div><div style='font-size:12px;color:#6b7280;'>"+t+"</div></div><button class='button button-red' onclick='POS.clearSingleSale(\""+e.id+"\")' style='padding:6px 12px;font-size:12px;margin-left:12px;'>åˆªé™¤</button>",document.getElementById("salesHistory").appendChild(n)})}},updateCharts:function(){this.data.charts.quantity&&(this.data.charts.quantity.destroy(),this.data.charts.quantity=null),this.data.charts.revenue&&(this.data.charts.revenue.destroy(),this.data.charts.revenue=null);for(var e={},t=0;t<this.data.sales.length;t++)for(var r=this.data.sales[t],n=0;n<r.items.length;n++){var o=r.items[n];e[o.name]||(e[o.name]={qty:0,rev:0}),e[o.name].qty+=o.quantity,e[o.name].rev+=o.quantity*o.price}var a=Object.keys(e);if(0===a.length)document.getElementById("quantityEmpty").classList.remove("hidden"),document.getElementById("revenueEmpty").classList.remove("hidden"),document.getElementById("quantityChart").style.display="none",document.getElementById("revenueChart").style.display="none",document.getElementById("quantityLegend").innerHTML="",document.getElementById("revenueLegend").innerHTML="";else{document.getElementById("quantityEmpty").classList.add("hidden"),document.getElementById("revenueEmpty").classList.add("hidden"),document.getElementById("quantityChart").style.display="block",document.getElementById("revenueChart").style.display="block";for(var s=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],d=[],t=0;t<a.length;t++)d.push({name:a[t],value:e[a[t]].qty,color:s[t%s.length]});d.sort(function(e,t){return t.value-e.value});for(var c=[],t=0;t<a.length;t++)c.push({name:a[t],value:e[a[t]].rev,color:s[t%s.length]});c.sort(function(e,t){return t.value-e.value});for(var l=[],i=[],u=[],t=0;t<d.length;t++)l.push(d[t].name),i.push(d[t].value),u.push(d[t].color);this.data.charts.quantity=new Chart(document.getElementById("quantityChart"),{type:"pie",data:{labels:l,datasets:[{data:i,backgroundColor:u,borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}});for(var p=[],f=[],h=[],t=0;t<c.length;t++)p.push(c[t].name),f.push(c[t].value),h.push(c[t].color);this.data.charts.revenue=new Chart(document.getElementById("revenueChart"),{type:"pie",data:{labels:p,datasets:[{data:f,backgroundColor:h,borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}}),this.renderLegend("quantityLegend",d,!1),this.renderLegend("revenueLegend",c,!0)}},renderLegend:function(e,t,r){for(var n=document.getElementById(e),o=0,a=0;a<t.length;a++)o+=t[a].value;n.innerHTML="";for(a=0;a<t.length;a++){var s=t[a],d=((s.value/o)*100).toFixed(1),c=document.createElement("div");c.className="legend-item",c.innerHTML="<div style='display:flex;align-items:center;'><span class='legend-color' style='background:"+s.color+";'></span><span>"+s.name+"</span></div><div><span style='font-weight:600;'>"+(r?"$"+s.value.toLocaleString():s.value.toLocaleString())+"</span><span style='font-size:12px;color:#6b7280;margin-left:4px;'>("+d+"%)</span></div>",n.appendChild(c)}},exportData:function(){var e={products:this.data.products,sales:this.data.sales,timestamp:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="POSå‚™ä»½_"+(new Date).toLocaleDateString("zh-TW").replace(/\//g,"-")+".json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),this.showAlert("è³‡æ–™åŒ¯å‡ºæˆåŠŸï¼")},importData:function(){var e=document.getElementById("importFile").files[0];if(e){var t=new FileReader,r=this;t.onload=function(e){try{var t=JSON.parse(e.target.result);if(confirm("åŒ¯å…¥å°‡è¦†è“‹ç¾æœ‰è³‡æ–™ï¼Œç¢ºå®šç¹¼çºŒï¼Ÿ")){for(var n=[],o=0;o<t.products.length;o++)n.push(r.db.operate("products","put",t.products[o]));for(o=0;o<t.sales.length;o++)n.push(r.db.operate("sales","put",t.sales[o]));Promise.all(n).then(function(){t.products&&(r.data.products=t.products,r.renderProducts(),r.renderProductsTable()),t.sales&&(r.data.sales=t.sales),document.getElementById("importFile").value="",r.showAlert("åŒ¯å…¥æˆåŠŸï¼")})}}catch(e){console.error(e),r.showAlert("åŒ¯å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æª”æ¡ˆæ ¼å¼")}},t.readAsText(e)}else this.showAlert("è«‹é¸æ“‡æª”æ¡ˆ")},showAlert:function(e){document.getElementById("alertMessage").textContent=e,document.getElementById("alertModal").classList.remove("hidden")},closeAlert:function(){document.getElementById("alertModal").classList.add("hidden")},init:function(){console.log("åˆå§‹åŒ– POS ç³»çµ±...");var self=this;this.loadProducts().then(function(){return self.loadSales()}).then(function(){console.log("è¼‰å…¥å®Œæˆ - å•†å“:",self.data.products.length,"éŠ·å”®:",self.data.sales.length);self.renderProducts()})}};document.addEventListener("DOMContentLoaded",function(){POS.init()});
</script>

<div class="container">
<div class="header">
<div class="nav">
<h1 class="title">POSéŠ·å”®ç³»çµ±</h1>
<div class="nav-buttons">
<button class="nav-btn active" onclick="POS.showPage('sales')">éŠ·å”®</button>
<button class="nav-btn" onclick="POS.showPage('products')">å•†å“</button>
<button class="nav-btn" onclick="POS.showPage('reports')">å ±è¡¨</button>
<button class="nav-btn" onclick="POS.showPage('backup')">å‚™ä»½</button>
</div>
</div>
</div>

<div class="main">
<div id="salesPage" class="page active">
<div class="sales-layout">
<div class="products-area">
<h2 class="section-title">å•†å“é¸æ“‡</h2>
<div class="card">
<h3 style="font-weight:500;margin-bottom:12px">å¿«é€Ÿæ–°å¢å•†å“</h3>
<div style="display:flex;gap:8px;flex-wrap:wrap">
<input id="productName" type="text" class="input" placeholder="å•†å“åç¨±" style="flex:1;min-width:150px">
<input id="productPrice" type="number" class="input" placeholder="åƒ¹æ ¼" step="0.01" style="width:120px">
<button onclick="POS.addManualProduct()" class="button button-green">æ–°å¢</button>
</div>
</div>
<div id="productGrid" class="product-grid"></div>
</div>
<div class="cart-area">
<h2 class="section-title">è³¼ç‰©è»Š</h2>
<div id="cartItems" class="cart-items">
<div style="text-align:center;color:#6b7280;padding:40px">è³¼ç‰©è»Šæ˜¯ç©ºçš„</div>
</div>
<div style="padding-top:12px;border-top:1px solid #e5e7eb">
<div id="totalAmount" style="font-size:18px;font-weight:bold;margin-bottom:12px">ç¸½è¨ˆ: $0</div>
<button onclick="POS.checkout()" class="button" style="width:100%" disabled id="checkoutBtn">çµå¸³</button>
</div>
</div>
</div>
</div>

<div id="productsPage" class="page">
<div class="page-content">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px">
<h2 class="section-title" style="margin:0">å•†å“ç®¡ç†</h2>
<button class="button button-green" onclick="POS.showProductModal()">æ–°å¢å•†å“</button>
</div>
<div class="card">
<table class="table">
<thead><tr><th>å•†å“åç¨±</th><th>åƒ¹æ ¼</th><th>æ“ä½œ</th></tr></thead>
<tbody id="productsTableBody"></tbody>
</table>
</div>
</div>
</div>

<div id="reportsPage" class="page">
<div class="page-content">
<h2 class="section-title">éŠ·å”®å ±è¡¨</h2>
<div class="stats-grid">
<div class="stat-card"><div id="totalProducts" class="stat-number">0</div><div class="stat-label">å•†å“ç¸½æ•¸</div></div>
<div class="stat-card"><div id="totalSales" class="stat-number">0</div><div class="stat-label">éŠ·å”®ç­†æ•¸</div></div>
<div class="stat-card"><div id="totalRevenue" class="stat-number">$0</div><div class="stat-label">ç¸½ç‡Ÿæ”¶</div></div>
<div class="stat-card"><div id="avgOrder" class="stat-number">$0</div><div class="stat-label">å¹³å‡å®¢å–®åƒ¹</div></div>
</div>

<div class="charts-container">
<div class="chart-card">
<div style="font-size:18px;font-weight:700;margin-bottom:4px">å•†å“éŠ·å”®æ•¸é‡åˆ†æ</div>
<div style="font-size:14px;color:#6b7280;margin-bottom:20px">ä¾éŠ·å”®æ•¸é‡çµ±è¨ˆå„å•†å“å æ¯”</div>
<div class="chart-wrapper">
<canvas id="quantityChart"></canvas>
<div id="quantityEmpty" class="hidden" style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#9ca3af">
<div style="font-size:48px;margin-bottom:12px">ğŸ“ˆ</div>
<div style="font-size:16px;font-weight:500">æš«ç„¡éŠ·å”®æ•¸æ“š</div>
</div>
</div>
<div id="quantityLegend" class="chart-legend"></div>
</div>

<div class="chart-card">
<div style="font-size:18px;font-weight:700;margin-bottom:4px">å•†å“éŠ·å”®é‡‘é¡åˆ†æ</div>
<div style="font-size:14px;color:#6b7280;margin-bottom:20px">ä¾éŠ·å”®é‡‘é¡çµ±è¨ˆå„å•†å“å æ¯”</div>
<div class="chart-wrapper">
<canvas id="revenueChart"></canvas>
<div id="revenueEmpty" class="hidden" style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#9ca3af">
<div style="font-size:48px;margin-bottom:12px">ğŸ’¸</div>
<div style="font-size:16px;font-weight:500">æš«ç„¡ç‡Ÿæ”¶æ•¸æ“š</div>
</div>
</div>
<div id="revenueLegend" class="chart-legend"></div>
</div>
</div>

<div class="card">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
<h3 style="font-weight:600;margin:0">éŠ·å”®è¨˜éŒ„</h3>
<button class="button button-red" onclick="POS.clearAllSales()" style="padding:8px 16px;font-size:14px">æ¸…é™¤å…¨éƒ¨è¨˜éŒ„</button>
</div>
<div id="salesHistory" style="max-height:400px;overflow-y:auto">
<p style="text-align:center;color:#6b7280;padding:40px">æš«ç„¡éŠ·å”®è¨˜éŒ„</p>
</div>
</div>
</div>
</div>

<div id="backupPage" class="page">
<div class="page-content">
<h2 class="section-title">è³‡æ–™å‚™ä»½èˆ‡é‚„åŸ</h2>
<div style="display:grid;gap:16px">
<div class="card">
<h3 style="font-weight:600;margin-bottom:12px">å‚™ä»½è³‡æ–™</h3>
<p style="color:#6b7280;margin-bottom:16px">å°‡æ‰€æœ‰å•†å“å’ŒéŠ·å”®è³‡æ–™åŒ¯å‡ºç‚ºæª”æ¡ˆ</p>
<button class="button" onclick="POS.exportData()">åŒ¯å‡ºè³‡æ–™</button>
</div>
<div class="card">
<h3 style="font-weight:600;margin-bottom:12px">é‚„åŸè³‡æ–™</h3>
<p style="color:#6b7280;margin-bottom:16px">å¾å‚™ä»½æª”æ¡ˆé‚„åŸè³‡æ–™</p>
<input type="file" id="importFile" accept=".json" style="margin-bottom:12px">
<button class="button button-gray" onclick="POS.importData()">åŒ¯å…¥è³‡æ–™</button>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="productModal" class="modal hidden">
<div class="modal-content">
<h3 id="modalTitle" style="font-size:18px;font-weight:600;margin-bottom:16px">æ–°å¢å•†å“</h3>
<div style="margin-bottom:16px">
<label style="display:block;margin-bottom:4px;font-weight:500">å•†å“åç¨±</label>
<input id="modalProductName" type="text" class="input">
</div>
<div style="margin-bottom:20px">
<label style="display:block;margin-bottom:4px;font-weight:500">åƒ¹æ ¼</label>
<input id="modalProductPrice" type="number" class="input" step="0.01">
</div>
<div style="display:flex;gap:8px">
<button class="button" onclick="POS.saveProduct()">å„²å­˜</button>
<button class="button button-gray" onclick="POS.closeProductModal()">å–æ¶ˆ</button>
</div>
</div>
</div>

<div id="alertModal" class="modal hidden">
<div class="modal-content">
<h3 style="font-size:18px;font-weight:600;margin-bottom:8px">æç¤ºè¨Šæ¯</h3>
<p id="alertMessage" style="color:#6b7280;margin-bottom:16px"></p>
<button class="button" onclick="POS.closeAlert()">ç¢ºå®š</button>
</div>
</div>

</body>
</html>
